{"mappings":"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","sources":["src/main.ts","src/controller.ts","src/game.ts","src/layer.ts","src/game-object.ts","src/animate.ts","src/asset.ts"],"sourcesContent":["import { Controller } from \"./controller\";\r\nimport { Game } from \"./game\";\r\nimport { GameObject } from \"./game-object\";\r\nimport { Layer } from \"./layer\";\r\n\r\nimport * as Animate from \"./animate\";\r\nimport * as Asset from \"./asset\";\r\n\r\n\r\nexport const Llama = {\r\n    Game,\r\n    Layer,\r\n    Controller,\r\n    GameObject,\r\n    Animate,\r\n    Asset\r\n}","import { ControllerEvent, ControllerAction, ControllerCallback } from \"./types/controller\";\r\n\r\nexport class Controller {\r\n    static events: ControllerEvent[] = [];\r\n    static lasts: { [key: string]: number } = {};\r\n    static pressed: { [key: string]: boolean } = {};\r\n    static mouseLocation: { x?: number, y?: number } = {};\r\n\r\n    static on(action: ControllerAction, target: string, callback: ControllerCallback): void {\r\n        Controller.events.push({ action, target, callback });\r\n    }\r\n\r\n    private static fire(action: ControllerAction, target: string, data?: object): void {\r\n        Controller.events.forEach(event => {\r\n            if (event.action && event.action !== action) return;\r\n            if (event.target && event.target !== target) return;\r\n            event.callback(action, target, (data) ? data : null);\r\n        });\r\n    }\r\n\r\n    static isPressed(code: string): boolean {\r\n        return Controller.pressed[code];\r\n    }\r\n\r\n    private static handleKeyboard(e) {\r\n        let target = \"key_\" + e.key.toLowerCase();\r\n        switch (e.type) {\r\n            case (\"keydown\"): {\r\n                if (Controller.pressed[target]) return;\r\n\r\n                Controller.pressed[target] = true;\r\n                Controller.lasts[target] = e.timeStamp;\r\n                return Controller.fire(\"press\", target);\r\n            }\r\n            case (\"keyup\"): {\r\n                if (!Controller.pressed[target]) return;\r\n\r\n                Controller.pressed[target] = false;\r\n                Controller.lasts[target] = e.timeStamp;\r\n                Controller.fire(\"release\", target);\r\n\r\n                let diff = e.timeStamp - Controller.lasts[target];\r\n\r\n                Controller.fire(\"hold\", target, { diff });\r\n\r\n                if (diff <= 150) {\r\n                    return Controller.fire(\"click\", target);\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private static handleMouse(e) {\r\n        let target = \"mouse_\" + ((e.button) ? [\"left\", \"middle\", \"right\", \"back\", \"forward\"][e.button] : \"moose\");\r\n        if (e.clientX && e.clientY) {\r\n            if (Controller.mouseLocation.x && Controller.mouseLocation.y) {\r\n                let deltaX = e.clientX - Controller.mouseLocation.x;\r\n                let deltaY = e.clientY - Controller.mouseLocation.y;\r\n\r\n                Controller.fire(\"move\", \"mouse_location\", { x: e.clientX, y: e.clientY, deltaX, deltaY });\r\n            }\r\n            Controller.mouseLocation.x = e.clientX;\r\n            Controller.mouseLocation.y = e.clientY;\r\n        }\r\n        switch (e.type) {\r\n            case (\"wheel\"): {\r\n                let direction = \"\";\r\n                if (e.deltaY < 0) {\r\n                    direction += \"N\";\r\n                } else if (e.deltaY > 0) {\r\n                    direction += \"S\";\r\n                }\r\n\r\n                if (e.deltaX < 0) {\r\n                    direction += \"W\";\r\n                } else if (e.deltaX > 0) {\r\n                    direction += \"E\";\r\n                }\r\n\r\n                return Controller.fire(\"move\", \"mouse_wheel\", { direction, deltaX: e.deltaX, deltaY: e.deltaY });\r\n            }\r\n            case (\"mousedown\"): {\r\n                if (Controller.pressed[target]) return;\r\n\r\n                Controller.pressed[target] = true;\r\n                Controller.lasts[target] = e.timeStamp;\r\n                return Controller.fire(\"press\", target);\r\n            }\r\n            case (\"mouseup\"): {\r\n                if (!Controller.pressed[target]) return;\r\n\r\n                Controller.pressed[target] = false;\r\n                Controller.lasts[target] = e.timeStamp;\r\n                Controller.fire(\"release\", target);\r\n\r\n                let diff = e.timeStamp - Controller.lasts[target];\r\n\r\n                Controller.fire(\"hold\", target, { diff });\r\n\r\n                if (diff <= 150) {\r\n                    return Controller.fire(\"click\", target);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static setup(): void {\r\n        document.addEventListener(\"mousedown\", Controller.handleMouse, false);\r\n        document.addEventListener(\"mouseup\", Controller.handleMouse, false);\r\n        document.addEventListener(\"mousemove\", Controller.handleMouse, false);\r\n        document.addEventListener(\"wheel\", Controller.handleMouse, false);\r\n\r\n        document.addEventListener(\"keydown\", Controller.handleKeyboard, false);\r\n        document.addEventListener(\"keyup\", Controller.handleKeyboard, false);\r\n    }\r\n}\r\n","import { Controller } from \"./controller\";\r\nimport { Layer } from \"./layer\";\r\n\r\nexport class Game {\r\n    static width: number;\r\n    static height: number;\r\n\r\n    static timeouts: Set<{ callback: (after: number) => void, delay: number, start?: number }> = new Set();\r\n    static last: number = -1;\r\n    static events: { type: string, call: Function }[] = [];\r\n\r\n    private static root: HTMLDivElement;\r\n    private static audioDumpspace: HTMLDivElement;\r\n    private static imagesDumpspace: HTMLDivElement;\r\n\r\n    private static makeElements() {\r\n        Game.root = document.createElement(\"div\");\r\n        Game.root.className = \"llama-game-engine game-root\";\r\n\r\n        Game.audioDumpspace = document.createElement(\"div\");\r\n        Game.audioDumpspace.className = \"llama-game-engine game-audio-dumpspace\";\r\n        Game.audioDumpspace.hidden = true;\r\n\r\n        Game.imagesDumpspace = document.createElement(\"div\");\r\n        Game.imagesDumpspace.className = \"llama-game-engine game-images-dumpspace\";\r\n        Game.imagesDumpspace.hidden = true;\r\n\r\n        document.body.appendChild(Game.root);\r\n        document.body.appendChild(Game.audioDumpspace);\r\n        document.body.appendChild(Game.imagesDumpspace);\r\n\r\n        let style = document.createElement(\"style\");\r\n        style.innerHTML = `\r\n            html, body {\r\n                background: black;\r\n                padding: 0;\r\n                margin: 0;\r\n                position: relative;\r\n                overflow: hidden;\r\n            }\r\n            \r\n            div.llama-game-engine.game-root {\r\n                position: absolute;\r\n                top: 0;\r\n                left: 0;\r\n                width: 100vw;\r\n                height: 100vh;\r\n            }\r\n            \r\n            canvas.llama-game-engine.game-canvas {\r\n                position: fixed;\r\n                top: 0;\r\n                left: 0;\r\n                width: 100%;\r\n                height: 100%;\r\n                object-fit: contain;\r\n            }\r\n        `;\r\n        document.head.appendChild(style);\r\n    }\r\n\r\n    static create(options: { width: number, height: number }) {\r\n        Game.width = options.width;\r\n        Game.height = options.height;\r\n        Game.makeElements();\r\n        Controller.setup();\r\n    }\r\n\r\n    static start() {\r\n        window.requestAnimationFrame(Game.loop);\r\n    }\r\n\r\n    static wait (callback: (after: number) => void, delay: number) {\r\n        Game.timeouts.add({ callback, delay });\r\n    };\r\n\r\n    static on(type: string, call: Function) {\r\n        Game.events.push({ type, call });\r\n    };\r\n\r\n    static fire(type, data) {\r\n        for (let e of Game.events) {\r\n            if (e.type == type) {\r\n                e.call((data) ? data : null);\r\n            }\r\n        }\r\n    };\r\n\r\n    static loop (time: DOMHighResTimeStamp) {\r\n        if (Game.last < 0) Game.last = time;\r\n\r\n        let delta = (time - Game.last);\r\n        if (delta > 1000) {\r\n            window.requestAnimationFrame(Game.loop);\r\n            return Game.last = time;\r\n        }\r\n\r\n        // Animate.tick(time);\r\n\r\n        for (let timeout of Game.timeouts) {\r\n            if (timeout.start === undefined) {\r\n                timeout.start = time;\r\n                continue;\r\n            }\r\n            if (time >= timeout.start + timeout.delay) {\r\n                timeout.callback(time - (timeout.start + timeout.delay));\r\n                Game.timeouts.delete(timeout);\r\n            }\r\n        }\r\n\r\n        Game.fire(\"loop\", { stamp: time, delta: delta });\r\n\r\n        Layer.draw();\r\n\r\n        Game.fire(\"postdraw\", { stamp: time, delta: delta });\r\n\r\n        window.requestAnimationFrame(Game.loop);\r\n        Game.last = time;\r\n    }\r\n\r\n    static pushCanvas(canvas: HTMLCanvasElement) {\r\n        Game.root.append(canvas);\r\n    }\r\n}\r\n","import { GameObject } from \"./game-object\";\r\nimport { Game } from \"./game\";\r\n\r\nexport class Layer {\r\n    static list: Map<string, Layer> = new Map();\r\n\r\n    private id: string;\r\n    private readonly canvas: HTMLCanvasElement;\r\n    private readonly options: { level: number };\r\n    readonly width: number;\r\n    readonly height: number;\r\n    private targets: Set<GameObject> = new Set();\r\n\r\n    ctx: CanvasRenderingContext2D;\r\n\r\n    constructor( id: string, options: { level: number } ) {\r\n        if ( !id ) {\r\n            throw new Error( 'Layer id is required' );\r\n        }\r\n        if (Layer.list.has( id )) {\r\n            return Layer.list.get( id );\r\n        }\r\n\r\n        this.id = id;\r\n        this.options = options;\r\n\r\n        if (!Game.width || !Game.height) {\r\n            throw new Error( 'Game not created yet' );\r\n        }\r\n\r\n        this.width = Game.width;\r\n        this.height = Game.height;\r\n\r\n        this.canvas = document.createElement( 'canvas' );\r\n        this.canvas.width = Game.width;\r\n        this.canvas.height = Game.height;\r\n        this.canvas.style.zIndex = options.level.toString();\r\n        this.canvas.className = \"llama-game-engine game-canvas\";\r\n\r\n        this.ctx = this.canvas.getContext( '2d' );\r\n        this.ctx.imageSmoothingEnabled = false;\r\n\r\n        Game.pushCanvas( this.canvas );\r\n\r\n        Layer.list.set( id, this );\r\n    }\r\n\r\n    assign( ...targets: GameObject[] ) {\r\n        for ( const target of targets ) {\r\n            this.targets.add( target );\r\n        }\r\n        return this;\r\n    }\r\n\r\n    remove( ...targets: GameObject[] ) {\r\n        for ( const target of targets ) {\r\n            this.targets.delete( target );\r\n        }\r\n        return this;\r\n    }\r\n\r\n    purge() {\r\n        this.targets.clear();\r\n    }\r\n\r\n    draw() {\r\n        this.ctx.clearRect( 0, 0, this.width, this.height );\r\n        for ( const target of this.targets ) {\r\n            target.draw( this );\r\n        }\r\n    }\r\n\r\n\r\n    static draw() {\r\n        Layer.list.forEach( layer => {\r\n            layer.draw();\r\n        } );\r\n    }\r\n\r\n    static purge() {\r\n        Layer.list.forEach( layer => {\r\n            layer.purge();\r\n        } );\r\n    }\r\n}\r\n","import { Layer } from \"./layer\";\r\nimport { Drawable } from \"./types/drawing\";\r\n\r\nexport class GameObject {\r\n    private asset: Drawable;\r\n    private x: number;\r\n    private y: number;\r\n    private w: number;\r\n    private h: number;\r\n\r\n    constructor( options: { asset: Drawable, x: number, y: number, w: number, h: number } ) {\r\n        this.asset = options.asset;\r\n        this.x = (options.x) ? options.x : 0;\r\n        this.y = (options.y) ? options.y : 0;\r\n        this.w = (options.w) ? options.w : 100;\r\n        this.h = (options.h) ? options.h : 100;\r\n    }\r\n\r\n    draw( layer: Layer ) {\r\n        this.asset.draw(layer, this.x, this.y, this.w, this.h);\r\n    }\r\n\r\n    move( { x, y }: { x: number, y: number } ): this {\r\n        if (typeof x === \"number\") this.x += x;\r\n        if (typeof y === \"number\") this.y += y;\r\n        return this;\r\n    }\r\n\r\n    scale( { w, h }: { w: number, h: number } ): this {\r\n        if (typeof w === \"number\") this.w += w;\r\n        if (typeof h === \"number\") this.h += h;\r\n        return this;\r\n    }\r\n\r\n    position( { x, y, w, h }: { x: number, y: number, w: number, h: number } ) {\r\n        if (typeof x === \"number\") this.x = x;\r\n        if (typeof y === \"number\") this.y = y;\r\n        if (typeof w === \"number\") this.w = w;\r\n        if (typeof h === \"number\") this.h = h;\r\n    }\r\n}\r\n","import { Layer } from \"./layer\";\r\nimport { Drawable } from \"./types/drawing\";\r\nimport { AnimatedDrawable } from \"./types/animate\";\r\n\r\nexport class Curves {\r\n    static stamp: number = -1;\r\n    static targets: Set<Curves> = new Set();\r\n\r\n    static tick(stamp: number) {\r\n        Curves.stamp = stamp;\r\n    }\r\n\r\n    time: number;\r\n    steps: { [percent: number] : number };\r\n    count: number;\r\n    offset: number = -1;\r\n    points: number[];\r\n\r\n    constructor(time: number, steps: { [percent: number]: number }, count?: number) {\r\n        this.time = time;\r\n        this.steps = steps;\r\n        this.count = (count) ? count : Infinity;\r\n        this.points = Object.keys(steps).map(key => parseFloat(key)).sort((a, b) => a - b);\r\n\r\n        Curves.targets.add(this);\r\n    }\r\n\r\n    value(): number | null {\r\n        if (this.points.length < 2) return null;\r\n        if (this.offset < 0) this.offset = Curves.stamp;\r\n        let duration = Curves.stamp - this.offset;\r\n        if (Math.floor(duration / this.time) >= this.count) return null;\r\n\r\n        let factor = duration % this.time / this.time;\r\n\r\n\r\n        for (let i = 1; i < this.points.length; i++) {\r\n            if (this.points[i] >= factor) {\r\n                let to = this.points[i];\r\n                let from = this.points[i - 1];\r\n                let percent = (factor - from) / (to - from);\r\n                return this.steps[from] + (this.steps[to] - this.steps[from]) * percent;\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport class AnimationSequence implements AnimatedDrawable {\r\n    private readonly drawables: Drawable[] = [];\r\n    private timing: Curves;\r\n    private readonly duration: number;\r\n\r\n    constructor(drawables: Drawable[], duration: number) {\r\n        this.drawables = drawables;\r\n        this.duration = duration;\r\n        this.reset();\r\n    }\r\n\r\n    reset() {\r\n        this.timing = new Curves(this.duration, {\r\n            0: 0,\r\n            1: this.drawables.length\r\n        });\r\n    }\r\n\r\n    draw( layer: Layer, x: number, y: number, w: number, h: number ) {\r\n        this.drawables[this.timing.value()].draw(layer, x, y, w, h);\r\n    }\r\n\r\n}\r\n\r\nexport class AnimationSwitches implements AnimatedDrawable {\r\n    private readonly drawables: { [key: string]: AnimatedDrawable };\r\n    private use: string;\r\n    private readonly default: string;\r\n\r\n    constructor(drawables: { [key: string]: AnimatedDrawable }, defaultDrawable: string) {\r\n        this.drawables = drawables;\r\n        this.default = defaultDrawable;\r\n        this.use = defaultDrawable;\r\n    }\r\n\r\n    draw( layer: Layer, x: number, y: number, w: number, h: number ) {\r\n        this.drawables[this.use].draw(layer, x, y, w, h);\r\n    }\r\n\r\n    switch(key: string) {\r\n        if (this.use === key) return;\r\n        this.use = key;\r\n        this.drawables[this.use].reset();\r\n    }\r\n\r\n    reset(useDefault: boolean = false) {\r\n        if (useDefault) this.use = this.default;\r\n        this.drawables[this.use].reset();\r\n    }\r\n}\r\n","import { Layer } from \"./layer\";\r\nimport { Drawable } from \"./types/drawing\";\r\nimport { TextOptions } from \"./types/asset\";\r\n\r\nexport class Image implements Drawable {\r\n    static dumpspace: HTMLDivElement;\r\n    static locations: Map<string, HTMLImageElement> = new Map();\r\n    static loading: Set<string> = new Set();\r\n\r\n    private location: string;\r\n    private readonly resource: HTMLImageElement;\r\n    private readonly crop: [] | [number, number, number, number] = [];\r\n\r\n    private static getImage( uri: string ): HTMLImageElement {\r\n        if (Image.locations.has(uri)) {\r\n            return Image.locations.get(uri);\r\n        }\r\n\r\n        let element = document.createElement(\"img\");\r\n        Image.locations.set(uri, element);\r\n        Image.loading.add(uri);\r\n\r\n        element.addEventListener(\"load\", () => {\r\n            Image.loading.delete(uri);\r\n        });\r\n\r\n        element.src = uri;\r\n        Image.dumpspace.append(element);\r\n    }\r\n\r\n    static setDumpSpace( element: HTMLDivElement ) {\r\n        Image.dumpspace = element;\r\n    }\r\n\r\n    constructor( { image, crop }: { image: string, crop?: { x: number, y: number, width: number, height: number } } ) {\r\n        this.location = image;\r\n        this.resource = Image.getImage(image);\r\n\r\n        if (crop) {\r\n            this.crop = [ crop.x, crop.y, crop.width, crop.height ];\r\n        }\r\n    }\r\n\r\n    draw( layer: Layer, x: number, y: number, w: number, h: number ) {\r\n        if (this.crop.length === 4) {\r\n            return layer.ctx.drawImage(this.resource, ...this.crop, x, y, w, h);\r\n        }\r\n        layer.ctx.drawImage(this.resource, x, y, w, h);\r\n    }\r\n}\r\n\r\nexport class TileMap {\r\n    map: Array<Image>;\r\n\r\n    constructor(image: string, { tiles, sizeX, sizeY }: { tiles: number, sizeX: number, sizeY: number }) {\r\n        this.map = new Array(tiles).map((_ignored, i) => new Image({ image: image, crop: { x: i * sizeX, y: 0, width: sizeX, height: sizeY } }));\r\n    }\r\n}\r\n\r\nexport class Font {\r\n    static locations: Map<string, boolean> = new Map();\r\n    static loading: Set<string> = new Set<string>();\r\n\r\n    name: string;\r\n    uri: string;\r\n    features: null;\r\n    fontFace: FontFace;\r\n\r\n    constructor(name, uri, features) {\r\n        this.name = name;\r\n        this.uri = uri;\r\n        this.features = features;\r\n\r\n        if (Font.locations.has(uri)) {\r\n            return;\r\n        }\r\n\r\n        if (features) {\r\n            this.features = features;\r\n            this.fontFace = new FontFace(name, \"url(\" + uri + \")\", this.features);\r\n        } else {\r\n            this.fontFace = new FontFace(name, \"url(\" + uri + \")\");\r\n        }\r\n\r\n        Font.loading.add(uri);\r\n        this.fontFace.load().then(() => {\r\n            Font.loading.delete(uri);\r\n            document.fonts.add(this.fontFace);\r\n        });\r\n    }\r\n}\r\n\r\nexport class Primitive implements Drawable {\r\n    fill: string;\r\n    stroke: string;\r\n\r\n    constructor({ fill, stroke } : { fill?: string, stroke?: string } ) {\r\n        this.fill = fill;\r\n        this.stroke = stroke;\r\n    }\r\n\r\n    draw( layer: Layer, x: number, y: number, w: number, h: number ) {\r\n        if (this.fill) {\r\n            layer.ctx.fillStyle = this.fill;\r\n            layer.ctx.fill();\r\n        }\r\n        if (this.stroke) {\r\n            layer.ctx.strokeStyle = this.stroke;\r\n            layer.ctx.stroke();\r\n        }\r\n    }\r\n\r\n    static center( x, y, w, h ) {\r\n        return [ x - (w / 2), y - (h / 2), w, h ];\r\n    }\r\n}\r\n\r\nexport class Rectangle extends Primitive {\r\n    constructor({ fill, stroke } : { fill?: string, stroke?: string } ) {\r\n        super({ fill, stroke });\r\n    }\r\n\r\n    draw( layer: Layer, x: number, y: number, w: number, h: number ) {\r\n        layer.ctx.beginPath();\r\n        layer.ctx.rect(x, y, w, h);\r\n        super.draw(layer, x, y, w, h);\r\n    }\r\n}\r\n\r\nexport class Circle extends Primitive {\r\n    constructor({ fill, stroke } : { fill?: string, stroke?: string } ) {\r\n        super({ fill, stroke });\r\n    }\r\n\r\n    draw( layer: Layer, x: number, y: number, w: number, h: number ) {\r\n        layer.ctx.beginPath();\r\n        layer.ctx.arc(x + w / 2, y + h / 2, (w + h) / 4, 0, 2 * Math.PI);\r\n        super.draw(layer, x, y, w, h);\r\n    }\r\n}\r\n\r\nexport class Arc extends Primitive {\r\n    angleFrom: number;\r\n    angleTo: number;\r\n\r\n    constructor({ fill, stroke, angleFrom, angleTo } : { fill?: string, stroke?: string, angleFrom: number, angleTo: number } ) {\r\n        super({ fill, stroke });\r\n        this.angleFrom = ((angleFrom - 90) * Math.PI / 180);\r\n        this.angleTo = ((angleTo - 90) * Math.PI / 180);\r\n    }\r\n\r\n    draw( layer: Layer, x: number, y: number, w: number, h: number ) {\r\n        layer.ctx.beginPath();\r\n        layer.ctx.arc(x + w / 2, y + h / 2, (w + h) / 4, this.angleFrom, this.angleTo);\r\n        layer.ctx.lineTo(x + w / 2, y + h / 2);\r\n        super.draw(layer, x, y, w, h);\r\n    }\r\n}\r\n\r\n\r\nexport class Text implements Drawable {\r\n    text: string;\r\n    size: number;\r\n    private readonly font: string;\r\n    fill: string;\r\n    stroke: string;\r\n    style: string;\r\n    private readonly alignH: TextOptions[\"alignH\"];\r\n    private readonly alignV: TextOptions[\"alignV\"];\r\n\r\n    constructor(options: TextOptions) {\r\n        this.text = options.text;\r\n        this.size = options.size;\r\n        this.font = options.font;\r\n        this.fill = (options.fill) ? options.fill : null;\r\n        this.stroke = (options.stroke) ? options.stroke : null;\r\n        this.style = (options.style) ? options.style : \"\";\r\n        this.alignH = (options.alignH) ? options.alignH : \"left\";\r\n        this.alignV = (options.alignV) ? options.alignV : \"top\";\r\n    }\r\n\r\n    draw( layer: Layer, x: number, y: number, w: number, h: number ) {\r\n        layer.ctx.textAlign = this.alignH;\r\n        layer.ctx.textBaseline = this.alignV;\r\n        layer.ctx.font = `${(this.style) ? this.style + \" \": \"\"}${this.size}px ${this.font}`;\r\n        if (this.fill) {\r\n            layer.ctx.fillStyle = this.fill;\r\n            layer.ctx.fillText(this.text, x, y);\r\n        }\r\n        if (this.stroke) {\r\n            layer.ctx.strokeStyle = this.stroke;\r\n            layer.ctx.strokeText(this.text, x, y);\r\n        }\r\n    }\r\n}\r\n"],"names":[],"version":3,"file":"main.js.map"}